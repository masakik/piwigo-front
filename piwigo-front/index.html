<!DOCTYPE html>
<html ng-app="demo">
<head lang="en">
    <meta charset="UTF-8">
    <title>Imagens EESC</title>
</head>
<body ng-controller="DemoCtrl">
<div magicview class="magicview" data-items="items">
    <div class="item" ng-repeat="item in items">
        <img ng-src="{{item.url}}" alt="">
    </div>
</div>
<script src="./lib/jquery-1.11.3.min.js"></script>
<script src="./lib/angular-1.4.x.min.js"></script>
<script src="./lib/angular-magicview/js/magicview.js"></script>

<script type="text/javascript">
    var demo = angular.module('demo', ['ui.magicview']);

    demo.controller('DemoCtrl', ['$scope', '$http', function ($scope, $http) {
        $http.get('http://imagens.eesc.usp.br/imagens/ws.php?format=json&method=pwg.images.search&query=tag=public')
                .success(function (res) {
                    $scope.images = res.result.images;
                    $scope.items = [];
                    //console.log($scope.images);
                    for (i = 0; i < $scope.images.length; i++) {
                        $scope.items[i] = {};
                        $scope.items[i].url = $scope.images[i].derivatives.thumb.url;
                        $scope.items[i].width = $scope.images[i].derivatives.thumb.width;
                        $scope.items[i].height = $scope.images[i].derivatives.thumb.height;
                    }

                    var m = $scope.items.length, t, i;

                    // While there remain elements to shuffle
                    while (m) {
                        // Pick a remaining elementâ€¦
                        i = Math.floor(Math.random() * m--);

                        // And swap it with the current element.
                        t = $scope.items[m];
                        $scope.items[m] = $scope.items[i];
                        $scope.items[i] = t;
                    }
                });
    }])

</script>
</body>
</html>
